-- ğŸ§¹ (opÈ›ional) curÄƒÈ›are veche
/*
REVOKE ALL PRIVILEGES ON ALL TABLES IN SCHEMA medics FROM web_anon;
REVOKE USAGE ON SCHEMA medics FROM web_anon;
DROP ROLE IF EXISTS authenticator;
DROP ROLE IF EXISTS web_anon;
*/

-- ğŸ‘¤ Creare rol web_anon (nu are voie sÄƒ facÄƒ login)
CREATE ROLE web_anon NOLOGIN;

-- âœ… AcordÄƒ acces la schema medics
GRANT USAGE ON SCHEMA medics TO web_anon;

-- âœ… Permisiuni de SELECT pe toate tabelele
GRANT SELECT ON ALL TABLES IN SCHEMA medics TO web_anon;

-- âœ… (OpÈ›ional dar recomandat) Permisiuni automate pentru viitoarele tabele
ALTER DEFAULT PRIVILEGES IN SCHEMA medics
GRANT SELECT ON TABLES TO web_anon;

-- ğŸ” Creare rol de autentificare (folosit de PostgREST)
CREATE ROLE authenticator NOINHERIT LOGIN PASSWORD 'mysecretpassword';

-- ğŸ§© ConecteazÄƒ autentificatorul cu rolul de acces anonim
GRANT web_anon TO authenticator;
